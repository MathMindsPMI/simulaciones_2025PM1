<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Jerarqu√≠a de Operaciones</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        parentheses: '#FF6B6B',
                        exponents: '#4ECDC4',
                        multiplication: '#45B7D1',
                        division: '#96CEB4',
                        addition: '#FFEAA7',
                        subtraction: '#DDA0DD'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-white dark:bg-gray-900 min-h-screen font-sans">
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <div class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 dark:text-white mb-4">
                üìä Simulador de Jerarqu√≠a de Operaciones
            </h1>
            <p class="text-lg text-gray-600 dark:text-gray-300 mb-6">
                Observa paso a paso c√≥mo se resuelven las operaciones siguiendo el orden correcto
            </p>
            
            <!-- Leyenda de colores -->
            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 mb-6">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Leyenda de Colores:</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 text-sm">
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-red-400 rounded"></div>
                        <span class="text-gray-700 dark:text-gray-300">Par√©ntesis [ ]</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-teal-400 rounded"></div>
                        <span class="text-gray-700 dark:text-gray-300">Exponentes ^</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-blue-400 rounded"></div>
                        <span class="text-gray-700 dark:text-gray-300">Multiplicaci√≥n √ó</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-green-400 rounded"></div>
                        <span class="text-gray-700 dark:text-gray-300">Divisi√≥n √∑</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-yellow-400 rounded"></div>
                        <span class="text-gray-700 dark:text-gray-300">Suma +</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-purple-300 rounded"></div>
                        <span class="text-gray-700 dark:text-gray-300">Resta ‚àí</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Selectores de ejercicio -->
        <div class="mb-6">
            <label class="block text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3">Selecciona un ejercicio:</label>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button onclick="loadExercise(1)" class="exercise-btn bg-primary text-white px-4 py-3 rounded-lg hover:bg-purple-600 transition-colors font-mono text-sm">
                    (‚àí2)‚Å¥√∑4+[6‚àí(‚àí3)√ó(‚àí2)]√ó3
                </button>
                <button onclick="loadExercise(2)" class="exercise-btn bg-gray-600 text-white px-4 py-3 rounded-lg hover:bg-gray-700 transition-colors font-mono text-sm">
                    [(‚àí6)+4√ó(‚àí3)]√∑(‚àí2)+(‚àí3)¬≥
                </button>
                <button onclick="loadExercise(3)" class="exercise-btn bg-gray-600 text-white px-4 py-3 rounded-lg hover:bg-gray-700 transition-colors font-mono text-sm">
                    (‚àí5)¬≤‚àí[(‚àí4)¬≥√∑8‚àí(‚àí2)¬≤]√ó3
                </button>
            </div>
        </div>

        <!-- Controles -->
        <div class="flex flex-wrap justify-center gap-4 mb-8">
            <button id="prevBtn" onclick="previousStep()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                ‚Üê Paso Anterior
            </button>
            <button id="nextBtn" onclick="nextStep()" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                Siguiente Paso ‚Üí
            </button>
            <button onclick="resetAnimation()" class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors">
                üîÑ Reiniciar
            </button>
        </div>

        <!-- √Årea de visualizaci√≥n -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6">
            <div class="text-center">
                <div class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                    Paso <span id="stepNumber">0</span> de <span id="totalSteps">0</span>
                </div>
                <div id="expressionDisplay" class="text-2xl md:text-3xl font-mono text-gray-800 dark:text-white mb-4 min-h-12 flex items-center justify-center">
                    Selecciona un ejercicio para comenzar
                </div>
                <div id="stepDescription" class="text-lg text-gray-600 dark:text-gray-300 mb-4 min-h-8">
                    
                </div>
                <div id="calculation" class="text-md text-gray-500 dark:text-gray-400 font-mono min-h-6">
                    
                </div>
            </div>
        </div>

        <!-- Resultado final -->
        <div id="finalResult" class="bg-green-100 dark:bg-green-900 border border-green-300 dark:border-green-700 rounded-lg p-4 text-center hidden">
            <h3 class="text-xl font-bold text-green-800 dark:text-green-200 mb-2">üéâ ¬°Resultado Final!</h3>
            <div id="finalAnswer" class="text-2xl font-mono text-green-700 dark:text-green-300"></div>
        </div>
    </div>

    <script>
        let currentExercise = null;
        let currentStep = 0;
        let steps = [];

        const exercises = {
            1: {
                original: "(‚àí2)‚Å¥√∑4+[6‚àí(‚àí3)√ó(‚àí2)]√ó3",
                steps: [
                    {
                        expression: "(‚àí2)‚Å¥√∑4+[6‚àí(‚àí3)√ó(‚àí2)]√ó3",
                        description: "Expresi√≥n original",
                        highlight: "",
                        calculation: ""
                    },
                    {
                        expression: '(‚àí2)‚Å¥√∑4+<span class="bg-red-400 px-1 rounded">[6‚àí(‚àí3)√ó(‚àí2)]</span>√ó3',
                        description: "PRIMERO resolvemos lo que est√° dentro de los CORCHETES",
                        highlight: "parentheses",
                        calculation: "Dentro de los corchetes tenemos: 6‚àí(‚àí3)√ó(‚àí2)"
                    },
                    {
                        expression: '(‚àí2)‚Å¥√∑4+[6‚àí<span class="bg-blue-400 px-1 rounded">(‚àí3)√ó(‚àí2)</span>]√ó3',
                        description: "Dentro de los corchetes, resolvemos la multiplicaci√≥n primero",
                        highlight: "multiplication",
                        calculation: "(‚àí3) √ó (‚àí2) = 6"
                    },
                    {
                        expression: '(‚àí2)‚Å¥√∑4+[<span class="bg-purple-300 px-1 rounded">6‚àí6</span>]√ó3',
                        description: "Dentro de los corchetes, resolvemos la resta",
                        highlight: "subtraction",
                        calculation: "6 ‚àí 6 = 0"
                    },
                    {
                        expression: '<span class="bg-teal-400 px-1 rounded">(‚àí2)‚Å¥</span>√∑4+[0]√ó3',
                        description: "Ahora resolvemos los exponentes fuera de los corchetes",
                        highlight: "exponents",
                        calculation: "(‚àí2)‚Å¥ = (‚àí2) √ó (‚àí2) √ó (‚àí2) √ó (‚àí2) = 16"
                    },
                    {
                        expression: '<span class="bg-green-400 px-1 rounded">16√∑4</span>+0√ó3',
                        description: "Resolvemos la divisi√≥n",
                        highlight: "division",
                        calculation: "16 √∑ 4 = 4"
                    },
                    {
                        expression: '4+<span class="bg-blue-400 px-1 rounded">0√ó3</span>',
                        description: "Resolvemos la multiplicaci√≥n",
                        highlight: "multiplication",
                        calculation: "0 √ó 3 = 0"
                    },
                    {
                        expression: '<span class="bg-yellow-400 px-1 rounded">4+0</span>',
                        description: "Finalmente, resolvemos la suma",
                        highlight: "addition",
                        calculation: "4 + 0 = 4"
                    },
                    {
                        expression: "4",
                        description: "¬°Resultado final!",
                        highlight: "",
                        calculation: ""
                    }
                ]
            },
            2: {
                original: "[(‚àí6)+4√ó(‚àí3)]√∑(‚àí2)+(‚àí3)¬≥",
                steps: [
                    {
                        expression: "[(‚àí6)+4√ó(‚àí3)]√∑(‚àí2)+(‚àí3)¬≥",
                        description: "Expresi√≥n original",
                        highlight: "",
                        calculation: ""
                    },
                    {
                        expression: '<span class="bg-red-400 px-1 rounded">[(‚àí6)+4√ó(‚àí3)]</span>√∑(‚àí2)+(‚àí3)¬≥',
                        description: "PRIMERO resolvemos lo que est√° dentro de los CORCHETES",
                        highlight: "parentheses",
                        calculation: "Dentro de los corchetes tenemos: (‚àí6)+4√ó(‚àí3)"
                    },
                    {
                        expression: '[(‚àí6)+<span class="bg-blue-400 px-1 rounded">4√ó(‚àí3)</span>]√∑(‚àí2)+(‚àí3)¬≥',
                        description: "Dentro de los corchetes, resolvemos la multiplicaci√≥n primero",
                        highlight: "multiplication",
                        calculation: "4 √ó (‚àí3) = ‚àí12"
                    },
                    {
                        expression: '[<span class="bg-yellow-400 px-1 rounded">(‚àí6)+(‚àí12)</span>]√∑(‚àí2)+(‚àí3)¬≥',
                        description: "Dentro de los corchetes, resolvemos la suma",
                        highlight: "addition",
                        calculation: "(‚àí6) + (‚àí12) = ‚àí18"
                    },
                    {
                        expression: '(‚àí18)√∑(‚àí2)+<span class="bg-teal-400 px-1 rounded">(‚àí3)¬≥</span>',
                        description: "Ahora resolvemos los exponentes fuera de los corchetes",
                        highlight: "exponents",
                        calculation: "(‚àí3)¬≥ = (‚àí3) √ó (‚àí3) √ó (‚àí3) = ‚àí27"
                    },
                    {
                        expression: '<span class="bg-green-400 px-1 rounded">(‚àí18)√∑(‚àí2)</span>+(‚àí27)',
                        description: "Resolvemos la divisi√≥n",
                        highlight: "division",
                        calculation: "(‚àí18) √∑ (‚àí2) = 9"
                    },
                    {
                        expression: '<span class="bg-yellow-400 px-1 rounded">9+(‚àí27)</span>',
                        description: "Finalmente, resolvemos la suma",
                        highlight: "addition",
                        calculation: "9 + (‚àí27) = ‚àí18"
                    },
                    {
                        expression: "‚àí18",
                        description: "¬°Resultado final!",
                        highlight: "",
                        calculation: ""
                    }
                ]
            },
            3: {
                original: "(‚àí5)¬≤‚àí[(‚àí4)¬≥√∑8‚àí(‚àí2)¬≤]√ó3",
                steps: [
                    {
                        expression: "(‚àí5)¬≤‚àí[(‚àí4)¬≥√∑8‚àí(‚àí2)¬≤]√ó3",
                        description: "Expresi√≥n original",
                        highlight: "",
                        calculation: ""
                    },
                    {
                        expression: '(‚àí5)¬≤‚àí<span class="bg-red-400 px-1 rounded">[(‚àí4)¬≥√∑8‚àí(‚àí2)¬≤]</span>√ó3',
                        description: "PRIMERO resolvemos lo que est√° dentro de los CORCHETES",
                        highlight: "parentheses",
                        calculation: "Dentro de los corchetes tenemos: (‚àí4)¬≥√∑8‚àí(‚àí2)¬≤"
                    },
                    {
                        expression: '(‚àí5)¬≤‚àí[<span class="bg-teal-400 px-1 rounded">(‚àí4)¬≥</span>√∑8‚àí(‚àí2)¬≤]√ó3',
                        description: "Dentro de los corchetes, resolvemos los exponentes primero",
                        highlight: "exponents",
                        calculation: "(‚àí4)¬≥ = (‚àí4) √ó (‚àí4) √ó (‚àí4) = ‚àí64"
                    },
                    {
                        expression: '(‚àí5)¬≤‚àí[‚àí64√∑8‚àí<span class="bg-teal-400 px-1 rounded">(‚àí2)¬≤</span>]√ó3',
                        description: "Dentro de los corchetes, resolvemos el segundo exponente",
                        highlight: "exponents",
                        calculation: "(‚àí2)¬≤ = (‚àí2) √ó (‚àí2) = 4"
                    },
                    {
                        expression: '(‚àí5)¬≤‚àí[<span class="bg-green-400 px-1 rounded">‚àí64√∑8</span>‚àí4]√ó3',
                        description: "Dentro de los corchetes, resolvemos la divisi√≥n",
                        highlight: "division",
                        calculation: "‚àí64 √∑ 8 = ‚àí8"
                    },
                    {
                        expression: '(‚àí5)¬≤‚àí[<span class="bg-purple-300 px-1 rounded">‚àí8‚àí4</span>]√ó3',
                        description: "Dentro de los corchetes, resolvemos la resta",
                        highlight: "subtraction",
                        calculation: "‚àí8 ‚àí 4 = ‚àí12"
                    },
                    {
                        expression: '<span class="bg-teal-400 px-1 rounded">(‚àí5)¬≤</span>‚àí(‚àí12)√ó3',
                        description: "Ahora resolvemos los exponentes fuera de los corchetes",
                        highlight: "exponents",
                        calculation: "(‚àí5)¬≤ = (‚àí5) √ó (‚àí5) = 25"
                    },
                    {
                        expression: '25‚àí<span class="bg-blue-400 px-1 rounded">(‚àí12)√ó3</span>',
                        description: "Resolvemos la multiplicaci√≥n",
                        highlight: "multiplication",
                        calculation: "(‚àí12) √ó 3 = ‚àí36"
                    },
                    {
                        expression: '<span class="bg-purple-300 px-1 rounded">25‚àí(‚àí36)</span>',
                        description: "Finalmente, resolvemos la resta (que se convierte en suma)",
                        highlight: "subtraction",
                        calculation: "25 ‚àí (‚àí36) = 25 + 36 = 61"
                    },
                    {
                        expression: "61",
                        description: "¬°Resultado final!",
                        highlight: "",
                        calculation: ""
                    }
                ]
            }
        };

        function loadExercise(exerciseNum) {
            currentExercise = exerciseNum;
            steps = exercises[exerciseNum].steps;
            currentStep = 0;
            
            // Actualizar botones de ejercicio
            document.querySelectorAll('.exercise-btn').forEach((btn, index) => {
                if (index + 1 === exerciseNum) {
                    btn.className = 'exercise-btn bg-primary text-white px-4 py-3 rounded-lg hover:bg-purple-600 transition-colors font-mono text-sm';
                } else {
                    btn.className = 'exercise-btn bg-gray-600 text-white px-4 py-3 rounded-lg hover:bg-gray-700 transition-colors font-mono text-sm';
                }
            });
            
            document.getElementById('finalResult').classList.add('hidden');
            updateDisplay();
        }

        function updateDisplay() {
            if (!currentExercise) return;
            
            const step = steps[currentStep];
            document.getElementById('stepNumber').textContent = currentStep + 1;
            document.getElementById('totalSteps').textContent = steps.length;
            document.getElementById('expressionDisplay').innerHTML = step.expression;
            document.getElementById('stepDescription').textContent = step.description;
            document.getElementById('calculation').textContent = step.calculation;
            
            // Actualizar botones
            document.getElementById('prevBtn').disabled = currentStep === 0;
            document.getElementById('nextBtn').disabled = currentStep === steps.length - 1;
            
            // Mostrar resultado final si es el √∫ltimo paso
            if (currentStep === steps.length - 1) {
                document.getElementById('finalResult').classList.remove('hidden');
                document.getElementById('finalAnswer').textContent = step.expression;
            } else {
                document.getElementById('finalResult').classList.add('hidden');
            }
        }

        function nextStep() {
            if (currentStep < steps.length - 1) {
                currentStep++;
                updateDisplay();
            }
        }

        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                updateDisplay();
            }
        }

        function resetAnimation() {
            currentStep = 0;
            updateDisplay();
        }

        // Cargar el primer ejercicio por defecto
        loadExercise(1);
    </script>
</body>
</html>